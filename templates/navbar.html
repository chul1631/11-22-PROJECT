{% load static %}
{% block css %}
<link rel="stylesheet" href="{% static 'css/navbar.css' %}">
{% endblock css %}


<div class="navbar navbar-light bg-dark fixed-top content_block">
  <div class="container-fluid">

    <!-- 로고 -->
    <a href="{% url 'main' %}" class="logo">
      <img src="{% static 'image/logo.png' %}" alt="별다방 로고">
    </a>

    <!-- 검색창 -->
    <form role="search" class="search">
      <input type="search" placeholder="카페 탐색하기" aria-label="Search">
      <!-- 검색창 작동 안 함(이동 X) -->
      <!-- 아이콘이 자꾸 움직여요. . . -->
      <button type="submit" class="search-button">
        <img src="https://cdn-icons-png.flaticon.com/512/16/16492.png" alt="검색 아이콘">
      </button>
    </form>

    <!-- 햄버거 -->
    <button type="button" class="navbar-toggler" data-bs-toggle="offcanvas" data-bs-target="#offcanvasLightNavbar"
      aria-controls="offcanvasLightNavbar">
      <span class="navbar-toggler-icon"></span>
    </button>


    <!-- 사이드 메뉴 -->
    <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasLightNavbar"
      aria-labelledby="offcanvasLightNavbarLabel">
      <div class="cate">
        <div class="offcanvas-header">
          <!-- 안녕하세요, ( ) 님! -->
          {% if request.user.is_authenticated %}
          {% if user.profile %}
          <img src="{{ user.profile.url }}" alt="직접 설정해둔 프로필 사진">
          {% else %}
          <img src="https://hungrito.com/wp-content/uploads/2021/03/FEATURED-IMAGE.jpg" alt="기본 프로필 사진">
          {% endif %}
          <p class="offcanvas-title" id="offcanvasLightNavbarLabel">안녕하세요, <br>
            <span class="name">{{request.user.first_name }}</span> 님!
          </p>
          {% else %}
          <!-- 로그인이 필요합니다. -->
          <div class="login-letter">
            <p class="line-one"><a href="{% url 'accounts:login' %} " class="nav-link">로그인</a>이</p>
            <p class="line-two">필요합니다.</p>
          </div>
          {% endif %}
          <!-- 닫기 버튼 없어도 될 것 같아서 없앰
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas"
            aria-label="Close"></button>-->
        </div>

        <!-- 카테고리 부분 -->
        <div class="offcanvas-body">
          <ul class="navbar-nav justify-content-end flex-grow-1 pe-3">
            <!-- 드롭다운 제거
              <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
                aria-expanded="false">
                테마별 맛집
              </a>
              <ul class="dropdown-menu dropdown-menu-dark">
                <li><a class="dropdown-item" href="{% url 'cafes:category' '분위기가 좋은' %}">분위기가 좋은</a></li>
                <li><a class="dropdown-item" href="{% url 'cafes:category' '디저트가 맛있는' %}">디저트가 맛있는</a></li>
                <li><a class="dropdown-item" href="{% url 'cafes:category' '커피가 맛있는' %}">커피가 맛있는</a></li>
                <li><a class="dropdown-item" href="{% url 'cafes:category' '작업하기 좋은' %}">작업하기 좋은</a></li>
                <li><a class="dropdown-item" href="{% url 'cafes:category' '커피가 저렴한' %}">커피가 저렴한</a></li>
                <li><a class="dropdown-item" href="{% url 'cafes:category' '이색적인' %}">이색적인</a></li>
              </ul>
            </li>-->
            <!-- 시간 내로 카페 db에 못채울 거 같으면 카테고리 줄이는 게 좋을듯 -->
            <ul class="cate-menu">
              <li><a class="dropdown-item" href="{% url 'cafes:category' '분위기가 좋은' %}">분위기가 좋은</a></li>
              <li><a class="dropdown-item" href="{% url 'cafes:category' '디저트가 맛있는' %}">디저트가 맛있는</a></li>
              <li><a class="dropdown-item" href="{% url 'cafes:category' '커피가 맛있는' %}">커피가 맛있는</a></li>
              <li><a class="dropdown-item" href="{% url 'cafes:category' '작업하기 좋은' %}">작업하기 좋은</a></li>
              <li><a class="dropdown-item" href="{% url 'cafes:category' '커피가 저렴한' %}">커피가 저렴한</a></li>
              <li><a class="dropdown-item" href="{% url 'cafes:category' '이색적인' %}">이색적인</a></li>
            </ul>
            <div class="personal">
              <li class="nav-item">
                {% if request.user.is_authenticated %}
                <a class="nav-link active" aria-current="page" href="{% url 'accounts:signup' %}">회원 가입</a>
                {% else %}
                <a class="nav-link active" aria-current="page" href="{% url 'accounts:profile' user.username %}">회원
                  정보</a>
                {% endif %}
              </li>
              <li class="nav-item">
                {% if request.user.is_authenticated %}
                <a class="nav-link" href="{% url 'accounts:logout' %}">로그아웃</a>
                {% else %}
                {% endif %}
            </div>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>