{% extends 'base.html' %}

{% load django_bootstrap5 %}
{% load static %}

{% block css %}
    <link rel="stylesheet" href="{% static 'accounts/css/update.css' %}">
{% endblock css %}

{% block content %}
  <div class="personal-info">
    {% if .user.image %}
      <img src="{{ .user.image.url }}" alt="직접 설정해둔 프로필 사진">
    {% else %}
      <img src="https://hungrito.com/wp-content/uploads/2021/03/FEATURED-IMAGE.jpg" alt="기본 프로필 사진">
    {% endif %}
    <p>{{ request.user }}</p>
  </div>
  <div class="update-form">
    <!-- 여기에 폼 -->
    <a href="{% url 'accounts:delete' %}">회원 탈퇴</a>
    <div class="buttons">
      <input type="submit" value="수정" class="update-button" />
      <button type="button" class="back-button" onclick="location.href='{% url 'accounts:profile' %}'">취소</button>
    </div>
  </div>
{% endblock content %}

{% block js %}
  <!-- 주소 API -->
  <script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
  {% comment %} 
  <script>
    const addressInput = document.querySelector('#id_address')
    const sidoInput = document.querySelector('#id_sido')
    const sigunguInput = document.querySelector('#id_sigungu')
    const roadnameInput = document.querySelector('#id_roadname')

    addressInput.addEventListener('click', function () {
      new daum.Postcode({
        oncomplete: function(data) {
          // 주소 정보를 해당 필드에 넣는다.
          addressInput.value = data.address
          sidoInput.value = data.sido
          sigunguInput.value = data.sigungu
          roadnameInput.value = data.roadname
          // 주소로 상세 정보를 검색
        }
      }).open()
    })
  </script> 
  {% endcomment %}
{% endblock js %}