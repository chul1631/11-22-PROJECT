{% extends 'base.html' %}

{% load django_bootstrap5 %}
{% load static %}

{% block css %}
  <link rel="stylesheet" href="{% static 'accounts/css/profile.css' %}">
{% endblock css %}

{% block content %}
  <div class="real_container">
    <!-- 메뉴 위 상단 부분 -->
    <div class="personal-info">
      <!-- 프로필 사진이 설정되어 있으면 프로필 사진을 띄움 -->
      {% if user.profile %}
        <img src="{{ user.profile.url }}" alt="직접 설정해둔 프로필 사진">
      {% else %}
        <img src="https://hungrito.com/wp-content/uploads/2021/03/FEATURED-IMAGE.jpg" alt="기본 프로필 사진">
      {% endif %}
      <div class="info-letter">
        <div class="info-upper">
          <p>{{ user }}</p>
          <!-- 로그인 했을 경우 버튼이 뜸-->
          {% if request.user.is_authenticated %}
            <!-- 회원정보 수정 -->
            {% if user == request.user %}
              <button type="submit" class="edit-button" onclick="location.href='{% url 'accounts:update' %}'">
                회원정보 수정
              </button>
            {% else %}
              <!-- 팔로우 버튼 -->
              {% if request.user != user %}
                <form action="{% url 'accounts:follow' user.username %}" method='POST'>
                  {% csrf_token %}
                  {% if request.user in user.followers.all %}
                    <input type="submit" value='팔로우 취소' class="follow-button">
                  {% else %}
                    <input type="submit" value='팔로우' class="follow-button">
                  {% endif %}
                </form>
              {% endif %}
            {% endif %}
          {% endif %}
        </div>
        <div class="info-lower">
          <p class="follow">팔로우
            {{ user.followings.count }}</p>
          <p class="follower">팔로워
            {{ user.followers.all|length }}</p>
        </div>
      </div>
    </div>

    <!-- 메뉴 -->
    <ul class="personal-tabs">
      <li class="active" rel="tab1">작성한 글</li>
      <li class="li" rel="tab2">즐겨찾기한 글</li>
      <li class="li" rel="tab3">좋아요한 글</li>
    </ul>

    <!-- 메뉴 내용 -->
    <div class="tab-container">
      <div id="tab1" class="tab-content">
        <img src="https://placeimg.com/363/363/animal" alt="임시이미지">
        <img src="https://placeimg.com/363/363/any" alt="임시이미지">
        <img src="https://placeimg.com/363/363/any" alt="임시이미지">
        <img src="https://placeimg.com/363/363/any" alt="임시이미지">
        <img src="https://placeimg.com/363/363/any" alt="임시이미지">
        <img src="https://placeimg.com/363/363/any" alt="임시이미지">
        <button type="" class="more">더보기</button>
      </div>
      <div id="tab2" class="tab-content">
        <img src="https://placeimg.com/363/363/any" alt="임시이미지">
        <img src="https://placeimg.com/363/363/any" alt="임시이미지">
        <img src="https://placeimg.com/363/363/any" alt="임시이미지">
        <img src="https://placeimg.com/363/363/any" alt="임시이미지">
        <img src="https://placeimg.com/363/363/any" alt="임시이미지">
        <img src="https://placeimg.com/363/363/any" alt="임시이미지">
        <button type="" class="more">더보기</button>
      </div>
      <div id="tab3" class="tab-content">
        <img src="https://placeimg.com/363/363/any" alt="임시이미지">
        <img src="https://placeimg.com/363/363/any" alt="임시이미지">
        <img src="https://placeimg.com/363/363/any" alt="임시이미지">
        <img src="https://placeimg.com/363/363/any" alt="임시이미지">
        <img src="https://placeimg.com/363/363/any" alt="임시이미지">
        <img src="https://placeimg.com/363/363/any" alt="임시이미지">
        <button type="" class="more">더보기</button>
      </div>
    </div>
  </div>
{% endblock content %}

{% block js %}
  <script src="http://code.jquery.com/jquery-latest.js"></script>
  <script src="{% static 'accounts/js/profile.js' %}"></script>
{% endblock js %}